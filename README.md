# pseudositer

*content management for the l a z y*

- - -

### what it is

Pseudositer is a jQuery plugin that creates a website via AJAX requests for Apache (or equivalent) index pages. Users can navigate folders of text, image, and other files within one HTML file, with nary a line of server-side code.

You can pass mappings to handle special extensions. By default, images are loaded into an `img` tag, and .txt and .html files are loaded into a `div`.

The plugin generates an address hash. Users can bookmark, browse backwards and forwards, and link within the pseudositer page's content.  Content and index listings are cached.

- - -

### getting started

Getting started with Pseudositer is easy. Make sure to include

    <!-- jQuery -->
    <script type="text/javascript" src="lib/jquery/jquery-1.6.4.min.js"></script>
    
    <!-- pseudositer -->
    <script type="text/javascript" src="lib/pseudositer/pseudositer.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#pseudositer').pseudositer('path/to/content/index/');
      });
    </script>

within your HTML page's `<head>` declaration, modifying the path to the pseudositer and jQuery source if need be.

If you use the above code, make sure to include a tag with the id `pseudositer` somewhere in the page's body:

    <body>
      <div id="pseudositer" />
	</body>

Likewise, modify the `path/to/content/index` argument to reflect where your site's content is located.  This will be resolved relative to the HTML page.

- - -

### pros & cons

A fair & balanced assessment.

#### Pros:

1. Like a content management system, you have total control over the styling of all pages at all times. All links will always work.
2. It's easy to generate or reorganize a site.  Rearrange directories and place files or images using the file browser of your choice. To make a photo album, upload a folder to your content directory that has JPGs with descriptive names in it. Done!
3. The page never flashes as the user navigates, since the browser never reloads.  It is possible to integrate smooth transitions.

#### Cons:

1. The site won't degrade gracefully for users without Javascript.
2. If you're using Apache, you must have "Options +Indexes" set for all directories in the pseudosite's content.  Other server packages must generate a similar index.
3. Your links will be organized alphabetically.

- - -

### options

#### linkSelector

#### recursion

#### showExtension

- - -

### styling

Pseudositer looks for elements with particular classes to populate with index links and content.  If the element does not already exist in the DOM, Pseudositer will generate it.

Your stylesheets should apply to these CSS classes to style a Pseudositer-generated page.

#### pseudositer-content

This class holds all content.  There should be at maximum one element with this class on the page.

#### pseudositer-index

This class applies to all elements that hold links from an index page.

#### pseudositer-index-<N>

This class applies to an element that holds the links from a certain level of index page, starting at `0`.  There should be at maximum one element with this class on the page.

For example, `pseudositer-index-0` is the class of the index of your root directory.

#### pseudositer-error

This class applies to an element that holds any error messages generated by pseudositer.  These include, but are not limited to, timeout and 404 messages.  There should be at maximum one element with this class on the page.

#### pseudositer-loading

This class applies to an element that will appear when pseudositer is loading new content.  There should be at maximum one element with this class on the page.

- - -

### events & handlers

Pseudositer triggers events upon its own element.  If `#pseudositer` is your Pseudositer element, you can observe the events with the following

    $('#pseudositer').bind('event.pseudositer', function() {
      // ... code ...
    });

All pseudositer events are unbound when the plugin is destroyed.  Most events have arguments in addition to the event object.  These are necessary if you are changing how Pseudositer's handlers work.

#### startUpdate ( `evt`, `path` )

* `evt` the event object
* `path` the path that pseudositer is updating to display

Triggered when pseudositer begins to update.

#### doneUpdate ( `evt` )

* `evt` the event object

Triggered when pseudositer is done updating.

#### startLoading ( `evt`, `path` )

* `evt` the event object
* `path` the path that pseudositer is starting to load

Triggered when pseudositer begins loading new content.  If content is already cached, this will not be fired.

#### failedLoading ( `evt`, `path` )

* `evt` the event object
* `path` the path that pseudositer could not load

Triggered when pseudositer fails to load a path.

#### doneLoading ( `evt`, `path` )

* `evt` the event object
* `path` the path that pseudositer successfully loaded

Triggered when pseudositer has successfully loaded a path

#### alwaysLoading ( `evt`, `path` )

* `evt` the event object
* `path` the path that pseudositer loaded successfully or failed to load

Triggered once after either doneLoading or failedLoading

#### destroyIndex ( `evt`, `dfd`, `aboveIndexLevel` )

* `evt` the event object
* `dfd` A jQuery Deferred object.  This should be resolved when all the necessary indices are no longer visible, or rejected if there was an error doing this.
* `aboveIndexLevel` the 0-based index level above which indices should no longer be visible.  For example, if the user just navigated to `#/`, this would be `0`.  All indices of level 1 or more should be removed.

Triggered when indices above a certain level should be removed from display.

#### createIndex ( `evt`, `dfd`, `path`, `$links` )

* `evt` the event object
* `dfd` A jQuery Deferred object.  This should be resolved when the index has been created, or rejected if there was an error doing this.
* `path` The path to the index that is being created
* `$links` An array of links from the index

Triggered when an index to a certain path should be created with the specified links.

#### loadImage ( `evt`, `dfd($elem)`, `pathToImage` )

Triggered when an image should be loaded

* `evt` the event object
* `dfd($elem)` A jQuery Deferred object.  This should be resolved once the image has been loaded, with a single argument that is the image element.  This element will be saved to cache and displayed in the content element.
* `pathToImage` the absolute path to the image

#### loadText ( `evt`, `dfd($elem)`, `pathToText` )

* `evt` the event object
* `dfd($elem) A jQuery Deferred object.  This should be resolved once the text has been loaded, with a single argument that is a DOM element with the text.  This element will be saved to cache and displayed in the content element.
* `pathToText the absolute path to the text

Triggered when text should be loaded

#### loadHtml ( `evt`, `dfd($elem)`, `pathToHtml` )

* `evt` the event object
* `dfd($elem)` A jQuery Deferred object.  This should be resolved once the HTML has been loaded, with a single argument that is a DOM element with the HTML.  This element will be saved to cache and displayed in the content element.
* `pathToHtml` the absolute path to the HTML

Triggered when HTML should be loaded

#### loadDefault ( `evt`, `dfd($elem)`, `pathToFile` )

* `evt` the event object
* `dfd($elem)` A jQuery Deferred object.  This should be resolved once whatever action to be performed has been done, with a single argument that could be a DOM element.  This element will be saved to cache and displayed in the content element.
* `pathToFile` the absolute path to the file

Triggered when content that is not otherwise mapped should be loaded

#### hideContent

Triggered when existing content should be hidden

* `evt` the event object
* `dfd` A jQuery Deferred object that should be resolved once the content is hidden.

#### showContent

Triggered when new content should be shown 

* `evt` the event object
* `dfd` A jQuery Deferred object that should be resolved once the content is displayed.
* `$content` A DOM element with the content that should be shown

#### showError

Triggered when an error should be displayed

* `evt` the event object
* `errObj` a javascript object with the error

#### destroy

Triggered after a call to `destroy()`, but before handlers are unbound.

* `evt` the event object
